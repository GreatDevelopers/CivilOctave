\hypertarget{namespacecivilsage_1_1views}{}\section{civilsage.\+views Namespace Reference}
\label{namespacecivilsage_1_1views}\index{civilsage.\+views@{civilsage.\+views}}


This module contain functions to controls veiws of django.  


\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{namespacecivilsage_1_1views_a7b4fd4478a312ce8e35a192159c59de9}{index} (request)
\begin{DoxyCompactList}\small\item\em first veiw created by rendering html page from templete \end{DoxyCompactList}\item 
def \hyperlink{namespacecivilsage_1_1views_a8b58c93a9c82e84143c43dafaa744a4b}{matrix} (request)
\begin{DoxyCompactList}\small\item\em This function display matrix for input from user and take response from index veiw and write input taken through \hyperlink{index_8html}{index.\+html} and write in \hyperlink{input_8sage}{input.\+sage} file. \end{DoxyCompactList}\item 
def \hyperlink{namespacecivilsage_1_1views_aed47fb0740a2fa14693f697905788719}{last} (request)
\begin{DoxyCompactList}\small\item\em This function gets request from matix.\+html and gives pdf as output to user it call \hyperlink{civil_8sh}{civil.\+sh} to process inputs and get output. \end{DoxyCompactList}\item 
def \hyperlink{namespacecivilsage_1_1views_a32de127956738677913352a2db84ecdb}{file} (request)
\begin{DoxyCompactList}\small\item\em This veiw take input data from file uploaded by user and processes to give output in form of response. \end{DoxyCompactList}\item 
def \hyperlink{namespacecivilsage_1_1views_a9914ff19f8e15ccab1a07eaeac8cfb21}{pdfemail} (request, name)
\begin{DoxyCompactList}\small\item\em A function that run as background process to send pdf as emails and called by \hyperlink{namespacecivilsage_1_1views_aed47fb0740a2fa14693f697905788719}{last()} and \hyperlink{namespacecivilsage_1_1views_a32de127956738677913352a2db84ecdb}{file()} when email option is chossen. \end{DoxyCompactList}\item 
def \hyperlink{namespacecivilsage_1_1views_ad9397359f36a9df37e0aa43f3be032a3}{first\+\_\+write} (request)
\begin{DoxyCompactList}\small\item\em This function that write basic input same for all veiws and called by \hyperlink{namespacecivilsage_1_1views_aed47fb0740a2fa14693f697905788719}{last()} and \hyperlink{namespacecivilsage_1_1views_a32de127956738677913352a2db84ecdb}{file()} when email option is chossen. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
This module contain functions to controls veiws of django. 

It include following functions -\/\+: \hyperlink{namespacecivilsage_1_1views_a7b4fd4478a312ce8e35a192159c59de9}{index()} \hyperlink{namespacecivilsage_1_1views_a8b58c93a9c82e84143c43dafaa744a4b}{matrix()} \hyperlink{namespacecivilsage_1_1views_aed47fb0740a2fa14693f697905788719}{last()} \hyperlink{namespacecivilsage_1_1views_a32de127956738677913352a2db84ecdb}{file()} \hyperlink{namespacecivilsage_1_1views_a9914ff19f8e15ccab1a07eaeac8cfb21}{pdfemail()} \hyperlink{namespacecivilsage_1_1views_ad9397359f36a9df37e0aa43f3be032a3}{first\+\_\+write()} ... \begin{DoxyAuthor}{Author}
amarjeet kapoor 
\end{DoxyAuthor}


\subsection{Function Documentation}
\hypertarget{namespacecivilsage_1_1views_a32de127956738677913352a2db84ecdb}{}\index{civilsage\+::views@{civilsage\+::views}!file@{file}}
\index{file@{file}!civilsage\+::views@{civilsage\+::views}}
\subsubsection[{file(request)}]{\setlength{\rightskip}{0pt plus 5cm}def civilsage.\+views.\+file (
\begin{DoxyParamCaption}
\item[{}]{request}
\end{DoxyParamCaption}
)}\label{namespacecivilsage_1_1views_a32de127956738677913352a2db84ecdb}


This veiw take input data from file uploaded by user and processes to give output in form of response. 

It call \hyperlink{civil_8sh}{civil.\+sh} to process 
\begin{DoxyParams}{Parameters}
{\em request} & request from \hyperlink{matrix_8html}{matrix.\+html} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
request and message to \hyperlink{index_8html}{index.\+html} 

pdf as response 
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em return} & message and request to \hyperlink{file_8html}{file.\+html} \begin{DoxyVerb}Documentation for a function
This veiw take input data from file uploaded by user and processes
to give output in form of response
\end{DoxyVerb}
 \\
\hline
\end{DoxyExceptions}


Definition at line 172 of file views.\+py.


\begin{DoxyCode}
172 \textcolor{keyword}{def }\hyperlink{namespacecivilsage_1_1views_a32de127956738677913352a2db84ecdb}{file}(request):
173 
174     \textcolor{stringliteral}{"""Documentation for a function}
175 \textcolor{stringliteral}{    This veiw take input data from file uploaded by user and processes}
176 \textcolor{stringliteral}{    to give output in form of response}
177 \textcolor{stringliteral}{    """}
178 
179     message=\textcolor{stringliteral}{'please fill again'}
180     \textcolor{keywordflow}{try}:
181         name,message=\hyperlink{namespacecivilsage_1_1views_ad9397359f36a9df37e0aa43f3be032a3}{first\_write}(request)
182         \textcolor{comment}{#getting file uploaded by user}
183         f=request.FILES[\textcolor{stringliteral}{"input\_file"}]
184         \hyperlink{bootstrap_8min_8js_ac2d69f5011896c6ed4a54e0dd36f6334}{if}(f.content\_type != \textcolor{stringliteral}{'text/csv'}):
185             \textcolor{keywordflow}{return} render( request,\textcolor{stringliteral}{'civilsage/file.html'},
186             \{\textcolor{stringliteral}{'email\_get'}: request.session.get(\textcolor{stringliteral}{'email\_get'}),
187             \textcolor{stringliteral}{'message'}:\textcolor{stringliteral}{'File Not in CSV FORMAT '}\})
188         data = [row \textcolor{keywordflow}{for} row \textcolor{keywordflow}{in} csv.reader(f)]
189         \textcolor{comment}{#getting numbers of storeys}
190         num = request.session.get(\textcolor{stringliteral}{'Number\_of\_storeys'})
191 
192         \textcolor{comment}{#opening input.sage to append remaining inputs}
193         command=name+\textcolor{stringliteral}{'/input.sage'}
194         file=open(command,\textcolor{stringliteral}{'a'})
195         \textcolor{comment}{#list of basic tags}
196         var = [\textcolor{stringliteral}{'mass'},\textcolor{stringliteral}{'Height\_storey'},\textcolor{stringliteral}{'Stiffness\_storey'}]
197         jar=0
198 
199         \textcolor{comment}{#writing matix into sage file}
200         \textcolor{keywordflow}{for} j \textcolor{keywordflow}{in} var:
201             message=\textcolor{stringliteral}{"Less no. of rows in csv file"}
202             file.write(j)
203             file.write(\textcolor{stringliteral}{'=matrix(['})
204 
205             \textcolor{comment}{#writing elements of matix}
206             \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(int(num)):
207                 file.write(\textcolor{stringliteral}{'['})
208 
209                 \textcolor{comment}{#getting input from tags}
210                 message=\textcolor{stringliteral}{"Less no. of elements in row "}+str(j)
211                 \hyperlink{bootstrap_8min_8js_ac2d69f5011896c6ed4a54e0dd36f6334}{if}(\textcolor{keywordflow}{not} data[jar][i].isdigit()):
212                     ii=i+1
213                 \textcolor{keywordflow}{else}:
214                     ii=i
215                 d=data[jar][ii]
216                 file.write(str(d))
217                 file.write(\textcolor{stringliteral}{']'})
218 
219                 \textcolor{comment}{#condition to check last element}
220                 \hyperlink{bootstrap_8min_8js_ac2d69f5011896c6ed4a54e0dd36f6334}{if}( i!=int(num)-1):
221                     file.write(\textcolor{stringliteral}{','})
222             jar=jar+1
223             file.write(\textcolor{stringliteral}{'])\(\backslash\)n'})
224         file.close()
225         \hyperlink{bootstrap_8min_8js_ac2d69f5011896c6ed4a54e0dd36f6334}{if}(request.POST.get(\textcolor{stringliteral}{'email\_id'})):
226             \textcolor{comment}{#calling funcion to send pdf and run that as background proces}
227             thread = threading.Thread(target=pdfemail,args=(request,name))
228             thread.daemon = \textcolor{keyword}{True}
229             thread.start()
230             message=\textcolor{stringliteral}{"PDF will be send to "}+request.POST.get(\textcolor{stringliteral}{'email\_id'})
231             \textcolor{keywordflow}{return} render(request, \textcolor{stringliteral}{"civilsage/index.html"}, \{\textcolor{stringliteral}{'message'}:message\})
232         \textcolor{keywordflow}{else}:
233             command=\textcolor{stringliteral}{'sh  civil.sh '}+name
234             os.system(command)
235 
236             \textcolor{comment}{#opening creted pdf to display to user}
237             command=name+\textcolor{stringliteral}{'/civil.pdf'}
238             f=open(command)
239 
240             \textcolor{comment}{#sending pdf as response}
241             response = HttpResponse(f,content\_type=\textcolor{stringliteral}{'application/pdf'})
242             response[\textcolor{stringliteral}{'Content-Disposition'}] = \textcolor{stringliteral}{'attachment; filename="civil.pdf"'}
243             \textcolor{comment}{#deleting temperary files}
244             command=\textcolor{stringliteral}{'rm -rf '}+name
245             os.system(command)
246             \textcolor{keywordflow}{return} response
247     \textcolor{keywordflow}{except}:
248         command=\textcolor{stringliteral}{'rm -rf '}+name
249         os.system(command)
250         \textcolor{keywordflow}{return} render(request, \textcolor{stringliteral}{"civilsage/file.html"},
251         \{\textcolor{stringliteral}{'message'}:message,\textcolor{stringliteral}{'email\_get'}:request.session.get(\textcolor{stringliteral}{'email\_get'})\})
252 
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=320pt]{namespacecivilsage_1_1views_a32de127956738677913352a2db84ecdb_cgraph}
\end{center}
\end{figure}


\hypertarget{namespacecivilsage_1_1views_ad9397359f36a9df37e0aa43f3be032a3}{}\index{civilsage\+::views@{civilsage\+::views}!first\+\_\+write@{first\+\_\+write}}
\index{first\+\_\+write@{first\+\_\+write}!civilsage\+::views@{civilsage\+::views}}
\subsubsection[{first\+\_\+write(request)}]{\setlength{\rightskip}{0pt plus 5cm}def civilsage.\+views.\+first\+\_\+write (
\begin{DoxyParamCaption}
\item[{}]{request}
\end{DoxyParamCaption}
)}\label{namespacecivilsage_1_1views_ad9397359f36a9df37e0aa43f3be032a3}


This function that write basic input same for all veiws and called by \hyperlink{namespacecivilsage_1_1views_aed47fb0740a2fa14693f697905788719}{last()} and \hyperlink{namespacecivilsage_1_1views_a32de127956738677913352a2db84ecdb}{file()} when email option is chossen. 


\begin{DoxyParams}{Parameters}
{\em request} & request from calling function \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
name and message \begin{DoxyVerb}This function that write basic input same for all
veiws
...
\end{DoxyVerb}
 
\end{DoxyReturn}


Definition at line 295 of file views.\+py.


\begin{DoxyCode}
295 \textcolor{keyword}{def }\hyperlink{namespacecivilsage_1_1views_ad9397359f36a9df37e0aa43f3be032a3}{first\_write}(request):
296     \textcolor{stringliteral}{"""}
297 \textcolor{stringliteral}{}
298 \textcolor{stringliteral}{    This function that write basic input same for all}
299 \textcolor{stringliteral}{    veiws}
300 \textcolor{stringliteral}{    ...}
301 \textcolor{stringliteral}{    """}
302     message=\textcolor{stringliteral}{'error occured please fill again'}
303 
304     \textcolor{comment}{#dictionary of all input tags}
305     lists = \{\textcolor{stringliteral}{'Soil\_type'}:\textcolor{stringliteral}{''},\textcolor{stringliteral}{'Number\_of\_storeys'}:\textcolor{stringliteral}{''}
306     ,\textcolor{stringliteral}{'Importance\_factor'}:\textcolor{stringliteral}{''},\textcolor{stringliteral}{'Response\_reduction\_factor'}:\textcolor{stringliteral}{''}
307     ,\textcolor{stringliteral}{'Zone\_factor'}:\textcolor{stringliteral}{''},\textcolor{stringliteral}{'Gravity\_acceleration'}:\textcolor{stringliteral}{''}
308     ,\textcolor{stringliteral}{'Modes\_considered'}:\textcolor{stringliteral}{''}\}
309     \textcolor{comment}{#name of directory of specific user}
310     name=\textcolor{stringliteral}{'Temp'}+request.session.session\_key+str(datetime.datetime.now())
311     name=name.replace(\textcolor{stringliteral}{" "}, \textcolor{stringliteral}{""})
312     \textcolor{comment}{#getting input using tags}
313     \textcolor{keywordflow}{for} var \textcolor{keywordflow}{in} lists.keys():
314         lists[var]=request.session.get(var)
315         name=name+str(lists[var])
316     command=\textcolor{stringliteral}{'cp -r sagemath '}+name
317     os.popen(command)
318 
319     \textcolor{comment}{#opening file for writing}
320     command=name+\textcolor{stringliteral}{'/input.sage'}
321     file = open(command, \textcolor{stringliteral}{'w'})
322 
323     \textcolor{comment}{#writing variables in input.sage file with syntax of sage}
324     \textcolor{keywordflow}{for} var \textcolor{keywordflow}{in} lists.keys():
325         file.write(var)
326         file.write(\textcolor{stringliteral}{'='})
327         file.write(lists[var])
328         file.write(\textcolor{stringliteral}{'\(\backslash\)n'})
329     file.close()
330     \textcolor{keywordflow}{return} name,message
331 \end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=322pt]{namespacecivilsage_1_1views_ad9397359f36a9df37e0aa43f3be032a3_icgraph}
\end{center}
\end{figure}


\hypertarget{namespacecivilsage_1_1views_a7b4fd4478a312ce8e35a192159c59de9}{}\index{civilsage\+::views@{civilsage\+::views}!index@{index}}
\index{index@{index}!civilsage\+::views@{civilsage\+::views}}
\subsubsection[{index(request)}]{\setlength{\rightskip}{0pt plus 5cm}def civilsage.\+views.\+index (
\begin{DoxyParamCaption}
\item[{}]{request}
\end{DoxyParamCaption}
)}\label{namespacecivilsage_1_1views_a7b4fd4478a312ce8e35a192159c59de9}


first veiw created by rendering html page from templete 


\begin{DoxyParams}{Parameters}
{\em request} & request from civilsage.\+urls() \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
request and path to \hyperlink{index_8html}{index.\+html} 
\end{DoxyReturn}


Definition at line 27 of file views.\+py.


\begin{DoxyCode}
27 \textcolor{keyword}{def }\hyperlink{namespacecivilsage_1_1views_a7b4fd4478a312ce8e35a192159c59de9}{index}(request):
28     \textcolor{keywordflow}{return} render(request, \textcolor{stringliteral}{'civilsage/index.html'})
29 
\end{DoxyCode}
\hypertarget{namespacecivilsage_1_1views_aed47fb0740a2fa14693f697905788719}{}\index{civilsage\+::views@{civilsage\+::views}!last@{last}}
\index{last@{last}!civilsage\+::views@{civilsage\+::views}}
\subsubsection[{last(request)}]{\setlength{\rightskip}{0pt plus 5cm}def civilsage.\+views.\+last (
\begin{DoxyParamCaption}
\item[{}]{request}
\end{DoxyParamCaption}
)}\label{namespacecivilsage_1_1views_aed47fb0740a2fa14693f697905788719}


This function gets request from matix.\+html and gives pdf as output to user it call \hyperlink{civil_8sh}{civil.\+sh} to process inputs and get output. 


\begin{DoxyParams}{Parameters}
{\em request} & request from \hyperlink{matrix_8html}{matrix.\+html} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
request and message to \hyperlink{index_8html}{index.\+html} 

pdf as response 
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em return} & message and request to \hyperlink{index_8html}{index.\+html} \\
\hline
\end{DoxyExceptions}


Definition at line 95 of file views.\+py.


\begin{DoxyCode}
95 \textcolor{keyword}{def }\hyperlink{namespacecivilsage_1_1views_aed47fb0740a2fa14693f697905788719}{last}(request):
96 
97     message=\textcolor{stringliteral}{'error occured please fill again'}
98     \textcolor{keywordflow}{try}:
99         \textcolor{comment}{#calling function to writte basic input}
100         name,message=\hyperlink{namespacecivilsage_1_1views_ad9397359f36a9df37e0aa43f3be032a3}{first\_write}(request)
101         \textcolor{comment}{#getting numbers of storeys}
102         num = request.session.get(\textcolor{stringliteral}{'Number\_of\_storeys'})
103 
104         \textcolor{comment}{#opening input.sage to append remaining inputs}
105         command=name+\textcolor{stringliteral}{'/input.sage'}
106         file=open(command,\textcolor{stringliteral}{'a'})
107 
108         \textcolor{comment}{#list of basic tags}
109         var = [\textcolor{stringliteral}{'mass'},\textcolor{stringliteral}{'Height\_storey'},\textcolor{stringliteral}{'Stiffness\_storey'}]
110 
111         \textcolor{comment}{#writing matix into sage file}
112         \textcolor{keywordflow}{for} j \textcolor{keywordflow}{in} var:
113             file.write(j)
114             file.write(\textcolor{stringliteral}{'=matrix(['})
115 
116             \textcolor{comment}{#writing elements of matix}
117             \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(int(num)):
118 
119                 \textcolor{comment}{#creating input tags}
120                 temp = j+str(i)
121                 file.write(\textcolor{stringliteral}{'['})
122 
123                 \textcolor{comment}{#getting input from tags}
124                 d=request.POST.get(temp)
125                 file.write(d)
126                 file.write(\textcolor{stringliteral}{']'})
127 
128                 \textcolor{comment}{#condition to check last element}
129                 \hyperlink{bootstrap_8min_8js_ac2d69f5011896c6ed4a54e0dd36f6334}{if}( i!=int(num)-1):
130                     file.write(\textcolor{stringliteral}{','})
131             file.write(\textcolor{stringliteral}{'])\(\backslash\)n'})
132         file.close()
133 
134         \hyperlink{bootstrap_8min_8js_ac2d69f5011896c6ed4a54e0dd36f6334}{if}(request.POST.get(\textcolor{stringliteral}{'email\_id'})):
135             \textcolor{comment}{#calling funcion to send pdf and run that as background process}
136             thread = threading.Thread(target=pdfemail,args=(request,name))
137             thread.daemon = \textcolor{keyword}{True}
138             thread.start()
139             message=\textcolor{stringliteral}{"PDF send to "}+request.POST.get(\textcolor{stringliteral}{'email\_id'})
140             \textcolor{keywordflow}{return} render(request, \textcolor{stringliteral}{"civilsage/index.html"}, \{\textcolor{stringliteral}{'message'}:message\})
141         \textcolor{keywordflow}{else}:
142 
143             \textcolor{comment}{#calling sh file for background processing}
144             command=\textcolor{stringliteral}{'sh  civil.sh '}+name
145             os.system(command)
146 
147             \textcolor{comment}{#opening creted pdf to display to user}
148             command=name+\textcolor{stringliteral}{'/civil.pdf'}
149             f=open(command)
150 
151             \textcolor{comment}{#sending pdf as response}
152             response = HttpResponse(f,content\_type=\textcolor{stringliteral}{'application/pdf'})
153             response[\textcolor{stringliteral}{'Content-Disposition'}] = \textcolor{stringliteral}{'attachment; filename="civil.pdf"'}
154             \textcolor{comment}{#deleting temperary files}
155             command=\textcolor{stringliteral}{'rm -rf '}+name
156             os.system(command)
157             \textcolor{keywordflow}{return} response
158     \textcolor{keywordflow}{except}:
159         \textcolor{keywordflow}{return} render(request, \textcolor{stringliteral}{"civilsage/index.html"},
160         \{\textcolor{stringliteral}{'message'}:message,\textcolor{stringliteral}{'email\_get'}:request.session.get(\textcolor{stringliteral}{'email\_get'})\})
161 
162 
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=322pt]{namespacecivilsage_1_1views_aed47fb0740a2fa14693f697905788719_cgraph}
\end{center}
\end{figure}


\hypertarget{namespacecivilsage_1_1views_a8b58c93a9c82e84143c43dafaa744a4b}{}\index{civilsage\+::views@{civilsage\+::views}!matrix@{matrix}}
\index{matrix@{matrix}!civilsage\+::views@{civilsage\+::views}}
\subsubsection[{matrix(request)}]{\setlength{\rightskip}{0pt plus 5cm}def civilsage.\+views.\+matrix (
\begin{DoxyParamCaption}
\item[{}]{request}
\end{DoxyParamCaption}
)}\label{namespacecivilsage_1_1views_a8b58c93a9c82e84143c43dafaa744a4b}


This function display matrix for input from user and take response from index veiw and write input taken through \hyperlink{index_8html}{index.\+html} and write in \hyperlink{input_8sage}{input.\+sage} file. 


\begin{DoxyParams}{Parameters}
{\em request} & request from \hyperlink{index_8html}{index.\+html} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
request and path to \hyperlink{matrix_8html}{matrix.\+html} and number of storeys and input taken from \hyperlink{index_8html}{index.\+html} 
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em return} & message and request to \hyperlink{index_8html}{index.\+html} \\
\hline
\end{DoxyExceptions}


Definition at line 39 of file views.\+py.


\begin{DoxyCode}
39 \textcolor{keyword}{def }\hyperlink{namespacecivilsage_1_1views_a8b58c93a9c82e84143c43dafaa744a4b}{matrix}(request):
40 
41     \textcolor{keywordflow}{try}:
42         \textcolor{comment}{#dictionary of all input tags}
43         
44         lists = \{\textcolor{stringliteral}{'Soil\_type'}:\textcolor{stringliteral}{''},\textcolor{stringliteral}{'Number\_of\_storeys'}:\textcolor{stringliteral}{''}
45         ,\textcolor{stringliteral}{'Importance\_factor'}:\textcolor{stringliteral}{''},\textcolor{stringliteral}{'Response\_reduction\_factor'}:\textcolor{stringliteral}{''}
46         ,\textcolor{stringliteral}{'Zone\_factor'}:\textcolor{stringliteral}{''},\textcolor{stringliteral}{'Gravity\_acceleration'}:\textcolor{stringliteral}{''}
47         ,\textcolor{stringliteral}{'Modes\_considered'}:\textcolor{stringliteral}{''},\textcolor{stringliteral}{'email\_get'}:\textcolor{stringliteral}{''}\}
48 
49         name = \textcolor{stringliteral}{''}
50 
51         \textcolor{comment}{#getting input using tags and sending it as response}
52         
53         \textcolor{keywordflow}{for} var \textcolor{keywordflow}{in} lists.keys():
54             request.session[var] = request.POST.get(var)
55 
56         \textcolor{comment}{#creating directory from base directory}
57         
58         lists[\textcolor{stringliteral}{'Number\_of\_storeys'}] = request.POST.get(\textcolor{stringliteral}{'Number\_of\_storeys'})
59 
60         \textcolor{comment}{#making list for iteratation in templete}
61         
62         number\_of\_storeys = list()
63         
64         \textcolor{comment}{#name of directory of specific user}
65         
66         \textcolor{keywordflow}{for} a \textcolor{keywordflow}{in} range(int(lists[\textcolor{stringliteral}{'Number\_of\_storeys'}])):
67             number\_of\_storeys.append(\textcolor{stringliteral}{'a'})
68 
69         \textcolor{comment}{#calling differnet veiws based on option whether}
70         \textcolor{comment}{#manually}
71 
72         \hyperlink{bootstrap_8min_8js_ac2d69f5011896c6ed4a54e0dd36f6334}{if}(request.POST.get(\textcolor{stringliteral}{'through\_file'})==\textcolor{stringliteral}{'Y'}):
73             \textcolor{keywordflow}{return} render( request,\textcolor{stringliteral}{'civilsage/file.html'}
74             ,\{\textcolor{stringliteral}{'number\_of\_storeys'}: number\_of\_storeys,
75             \textcolor{stringliteral}{'email\_get'}: request.POST.get(\textcolor{stringliteral}{'email\_get'})\})
76         \textcolor{keywordflow}{else}:
77         \textcolor{comment}{#user want to upload matrix value through file or}
78         
79             \textcolor{keywordflow}{return} render( request,\textcolor{stringliteral}{'civilsage/matrix.html'}
80             ,\{\textcolor{stringliteral}{'number\_of\_storeys'}: number\_of\_storeys,
81             \textcolor{stringliteral}{'email\_get'}: request.POST.get(\textcolor{stringliteral}{'email\_get'}) \})
82     \textcolor{keywordflow}{except}:
83         \textcolor{keywordflow}{return} render(request, \textcolor{stringliteral}{'civilsage/index.html'}
84         ,\{\textcolor{stringliteral}{'message'}:\textcolor{stringliteral}{'please fill again'}\})
85 
86 
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=260pt]{namespacecivilsage_1_1views_a8b58c93a9c82e84143c43dafaa744a4b_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=308pt]{namespacecivilsage_1_1views_a8b58c93a9c82e84143c43dafaa744a4b_icgraph}
\end{center}
\end{figure}


\hypertarget{namespacecivilsage_1_1views_a9914ff19f8e15ccab1a07eaeac8cfb21}{}\index{civilsage\+::views@{civilsage\+::views}!pdfemail@{pdfemail}}
\index{pdfemail@{pdfemail}!civilsage\+::views@{civilsage\+::views}}
\subsubsection[{pdfemail(request, name)}]{\setlength{\rightskip}{0pt plus 5cm}def civilsage.\+views.\+pdfemail (
\begin{DoxyParamCaption}
\item[{}]{request, }
\item[{}]{name}
\end{DoxyParamCaption}
)}\label{namespacecivilsage_1_1views_a9914ff19f8e15ccab1a07eaeac8cfb21}


A function that run as background process to send pdf as emails and called by \hyperlink{namespacecivilsage_1_1views_aed47fb0740a2fa14693f697905788719}{last()} and \hyperlink{namespacecivilsage_1_1views_a32de127956738677913352a2db84ecdb}{file()} when email option is chossen. 


\begin{DoxyParams}{Parameters}
{\em request} & request from calling function \\
\hline
{\em name} & name of directory to becreated for user \\
\hline
\end{DoxyParams}

\begin{DoxyExceptions}{Exceptions}
{\em send} & error message through email \\
\hline
\end{DoxyExceptions}


Definition at line 260 of file views.\+py.


\begin{DoxyCode}
260 \textcolor{keyword}{def }\hyperlink{namespacecivilsage_1_1views_a9914ff19f8e15ccab1a07eaeac8cfb21}{pdfemail}(request,name):
261 
262     message=\textcolor{stringliteral}{'unable to send it will be send after sometime'}
263     \textcolor{keywordflow}{try}:
264         \textcolor{comment}{#creating and writing sh file for background processing}
265         email\_id=request.POST.get(\textcolor{stringliteral}{'email\_id'})
266         command=name+\textcolor{stringliteral}{'/email.txt'}
267         f=open(command,\textcolor{stringliteral}{'w'})
268         f.write(email\_id)
269         f.close()
270         command=\textcolor{stringliteral}{'sh  civil.sh '}+name
271         os.system(command)
272         command=name+\textcolor{stringliteral}{'/civil.pdf'}
273         email\_id=request.POST.get(\textcolor{stringliteral}{'email\_id'})
274         user\_email = EmailMessage(\textcolor{stringliteral}{'Dynamics of structure'},
275         \textcolor{stringliteral}{'You have is ready'}, to=[email\_id])
276         user\_email.attach\_file(command)
277         message=\textcolor{stringliteral}{'wrong email id'}
278         user\_email.send()
279         command=\textcolor{stringliteral}{'rm -rf '}+name
280         os.system(command)
281     \textcolor{keywordflow}{except}:
282         command=\textcolor{stringliteral}{'rm -rf '}+name
283         \hyperlink{bootstrap_8min_8js_ac2d69f5011896c6ed4a54e0dd36f6334}{if}(message==\textcolor{stringliteral}{'wrong email id'}):
284                     os.system(command)
285                 email\_id=request.POST.get(\textcolor{stringliteral}{'email\_id'})
286         user\_email = EmailMessage(\textcolor{stringliteral}{'Dynamics of structure'},
287         message, to=[email\_id])
288 
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=270pt]{namespacecivilsage_1_1views_a9914ff19f8e15ccab1a07eaeac8cfb21_cgraph}
\end{center}
\end{figure}


